<project name="NFCTools" basedir="." default="make">
	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
	<classpath>
	    <pathelement location="./lib/ant-contrib-1.0b3.jar"/>
	  </classpath>
	</taskdef>
	
	<property name="git.dir"     value="./../../nfctools"/>

	<property name="src.api.dir"     value="${git.dir}/nfctools-api/src/main/java"/>
	<property name="src.ndef.dir"     value="${git.dir}/nfctools-ndef/src/main/java"/>
	<property name="src.core.dir"     value="${git.dir}/nfctools-core/src/main/java"/>

	<property name="build.dir"   value="build"/>
	<property name="classes.dir" value="${build.dir}/classes"/>
	<property name="jar.dir"     value="./lib"/>
	<property name="jar.filename" 	value="nfctools"/>
	<property name="debug" 		value="false"/>

	<property name="src.dir"     value="${build.dir}/src"/>

	<target name="clean">
		<delete dir="${build.dir}"/>
		<delete dir="${src.dir}"/>
	</target>

	<target name="compile">
		<mkdir dir="${classes.dir}"/>
		<mkdir dir="${src.dir}"/>

	  	<path id="lib.path.ref">
		    <fileset dir="lib" includes="*.jar"/>
		</path>
		
		<copy todir="${src.dir}">
			<fileset dir="${src.api.dir}"/>
			<fileset dir="${src.ndef.dir}"/>
			<fileset dir="${src.core.dir}"/>
		</copy>

		<javac srcdir="${src.dir}" destdir="${classes.dir}" debug="${debug}" target="1.6" source="1.6">
			<classpath refid="lib.path.ref"/>
		</javac>
		<copy todir="${classes.dir}">
			<fileset dir="${src.dir}" excludes="**/*.java"/>
		</copy>

	</target>

	<target name="jar" depends="compile">
		<mkdir dir="${jar.dir}"/>

		<if>
			<equals arg1="${debug}" arg2="true" />
			<then>
				<echo message="Debug build" />
				<copy todir="${classes.dir}">
					<fileset dir="${src.dir}" />
				</copy>
			</then>
		</if>

		<jar destfile="${jar.dir}/${jar.filename}.jar" basedir="${classes.dir}">
			<manifest>
			</manifest>
		</jar>
	</target>

	<target name="make" depends="jar,clean">
	</target>

</project>